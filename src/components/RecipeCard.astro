---
import { getCloudinaryUrl } from '../utils/cloudinary';

export interface Props {
  recipe: {
    slug: string;
    data: {
      title: string;
      historicalFigure: string;
      mealType: string;
      cookTime: number;
      difficulty: string;
      description: string;
      image?: string;
    };
  };
}

const { recipe } = Astro.props;
---

<article class="bg-secondary rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow border border-primary/20">
  {recipe.data.image && (
    <div class="relative w-full h-48 bg-surface">
      <img 
        src={getCloudinaryUrl(recipe.data.image, { width: 400, height: 300 })}
        alt={recipe.data.title}
        class="w-full h-full object-cover"
        loading="lazy"
      />
    </div>
  )}
  <div class="p-6">
    <h3 class="text-xl font-bold mb-2">
      <a href={`/recipes/${recipe.slug}`} class="text-text-dark hover:text-accent transition-colors">
        {recipe.data.title}
      </a>
    </h3>
    <p class="text-muted mb-3">Inspired by {recipe.data.historicalFigure}</p>
    <p class="text-text-dark/80 text-sm mb-4 line-clamp-2">{recipe.data.description}</p>
    <div class="flex justify-between items-center text-sm">
      <span class="bg-accent text-secondary px-3 py-1 rounded-full capitalize font-medium text-xs">{recipe.data.mealType}</span>
      <span class="flex items-center text-muted">
        <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        {recipe.data.cookTime} min
      </span>
      <span class="capitalize font-medium text-accent">{recipe.data.difficulty}</span>
    </div>
  </div>
</article>
